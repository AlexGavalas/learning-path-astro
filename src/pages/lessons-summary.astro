---
import GlobalLayout from '~layouts/global.astro';
import NotesList from '~components/notes-list.astro';
import { supabase } from '~lib/supabase';
import { TITLE } from '~constants';

export const prerender = false;

const { data: summaries, error } = await supabase
    .from('lesson_summaries_meta')
    .select('*')
    .order('updated', { ascending: false });

if (error) {
    throw error;
}

const title = `Lesson Summaries | ${TITLE}`;
---

<GlobalLayout title={title}>
    <section class="text-xl leading-8 grid gap-6">
        <h2 class="text-black dark:text-white">Lesson Summaries</h2>
        <p class="text-center">
            This is where I will try to summarise the things I learn. Either
            from online courses or from an interesting article I read, I keep
            the things I find interesting here.
        </p>
        <NotesList
            baseUrl="lessons-summary"
            notes={summaries}
            timeZone="Europe/Athens"
        />
    </section>
</GlobalLayout>
